<h1>Lista das famílias</h1>

<table>
  <tr>
    <th>Nome</th>
    <th>Raça</th>
    <th>Integrantes</th>
    <th>Descrição</th>
    <th>Livros</th>
    <th>Ações</th>
  </tr>

<% @families.each do |family| %>
  <tr>
    <td><%= family.nome %></td>
    <td>
      <ul>
        <% family.races.each do |race| %>
          <li> <%= race.nome %> </li>
        <% end %>
      </ul>
    </td>
    
    <td>
      <ul>
        <% family.names.each do |name| %>
          <li> <%= name.nome %> </li>
        <% end %>
      </ul>
    </td>
    
    <td><%= h(family.descr).gsub(/\n/, '<br/>').html_safe %></td>
    <td>
      <ul>
        <% family.books.each do |book| %>
          <li> <%= book.nome %> </li>
        <% end %>
      </ul>
    </td>
    <td><%= link_to 'Detalhes', family %><br/>
    <%= link_to 'Editar', edit_family_path(family) %><br/>
    <%= link_to 'Remover', family, method: :delete, data: { confirm: 'Você tem certeza?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'Nova familia', new_family_path %>
